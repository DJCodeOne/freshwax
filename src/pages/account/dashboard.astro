---
// src/pages/account/dashboard.astro
// OPTIMIZED: Full customer account management with profile editing, password change, order tracking
export const prerender = false;

const response = Astro.response;
response.headers.set('Cache-Control', 'no-store');
---
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Account - Fresh Wax</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
  <div id="loadingScreen" class="loading-screen">
    <div class="spinner"></div>
    <p>Loading your account...</p>
  </div>

  <div id="mainContent" class="hidden">
    <!-- Header -->
    <header class="header">
      <div class="header-container">
        <div class="header-left">
          <a href="/" class="logo-link">
            <img src="/logo.webp" alt="Fresh Wax" class="logo">
          </a>
        </div>
        <nav class="header-nav">
          <a href="/releases" class="nav-link">Releases</a>
          <a href="/dj-mixes" class="nav-link">DJ Mixes</a>
          <a href="/merch" class="nav-link">Merch</a>
          <a href="/cart" class="nav-link cart-link">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
            </svg>
            <span id="cartCount" class="cart-count hidden">0</span>
          </a>
        </nav>
        <div class="header-right">
          <div class="user-menu">
            <button class="user-menu-btn" id="userMenuBtn">
              <div class="user-avatar" id="userAvatar">
                <span id="avatarInitial">C</span>
              </div>
              <span class="user-display-name" id="headerDisplayName">Customer</span>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="16" height="16">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </button>
            <div class="user-dropdown hidden" id="userDropdown">
              <a href="#profile" class="dropdown-item" data-tab="profile">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                My Profile
              </a>
              <a href="#orders" class="dropdown-item" data-tab="orders">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" /></svg>
                My Orders
              </a>
              <a href="#downloads" class="dropdown-item" data-tab="downloads">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>
                Downloads
              </a>
              <a href="#wishlist" class="dropdown-item" data-tab="wishlist">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>
                Wishlist
              </a>
              <a href="#settings" class="dropdown-item" data-tab="settings">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                Settings
              </a>
              <div class="dropdown-divider"></div>
              <button class="dropdown-item logout-item" id="logoutBtn">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" /></svg>
                Sign Out
              </button>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Dashboard -->
    <main class="dashboard">
      <div class="dashboard-layout">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
          <div class="sidebar-profile">
            <div class="sidebar-avatar" id="sidebarAvatar">
              <span id="sidebarAvatarInitial">C</span>
            </div>
            <div class="sidebar-user-info">
              <span class="sidebar-username" id="sidebarUsername">@customer</span>
              <span class="sidebar-member-badge">
                <svg fill="currentColor" viewBox="0 0 20 20" width="12" height="12"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg>
                Member
              </span>
            </div>
          </div>
          
          <nav class="sidebar-nav">
            <button class="sidebar-link active" data-tab="overview">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>
              Overview
            </button>
            <button class="sidebar-link" data-tab="orders">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" /></svg>
              Orders
              <span class="sidebar-badge" id="ordersBadge">0</span>
            </button>
            <button class="sidebar-link" data-tab="downloads">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>
              Downloads
              <span class="sidebar-badge" id="downloadsBadge">0</span>
            </button>
            <button class="sidebar-link" data-tab="wishlist">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>
              Wishlist
              <span class="sidebar-badge" id="wishlistBadge">0</span>
            </button>
            <button class="sidebar-link" data-tab="profile">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
              Profile
            </button>
            <button class="sidebar-link" data-tab="settings">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
              Settings
            </button>
          </nav>
          
          <div class="sidebar-footer">
            <a href="/releases" class="sidebar-cta">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" /></svg>
              Browse Music
            </a>
          </div>
        </aside>

        <!-- Main Content Area -->
        <div class="main-content">
          <!-- Overview Tab -->
          <section class="tab-content active" id="tab-overview">
            <div class="content-header">
              <div class="content-header-left">
                <h1>Welcome back, <span id="welcomeName">Customer</span>!</h1>
                <p class="content-subtitle">Here's what's happening with your account</p>
              </div>
              <div class="content-header-right">
                <span class="last-login">Last login: <span id="lastLoginTime">Just now</span></span>
              </div>
            </div>

            <!-- Quick Stats -->
            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-icon orders-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" /></svg>
                </div>
                <div class="stat-details">
                  <span class="stat-number" id="statTotalOrders">0</span>
                  <span class="stat-label">Total Orders</span>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon downloads-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>
                </div>
                <div class="stat-details">
                  <span class="stat-number" id="statDownloads">0</span>
                  <span class="stat-label">Downloads</span>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon wishlist-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>
                </div>
                <div class="stat-details">
                  <span class="stat-number" id="statWishlist">0</span>
                  <span class="stat-label">Wishlist Items</span>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon spent-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                </div>
                <div class="stat-details">
                  <span class="stat-number" id="statTotalSpent">£0</span>
                  <span class="stat-label">Total Spent</span>
                </div>
              </div>
            </div>

            <!-- Recent Activity -->
            <div class="section-card">
              <div class="section-card-header">
                <h2>Recent Orders</h2>
                <button class="view-all-btn" data-tab="orders">View All →</button>
              </div>
              <div class="recent-orders-list" id="recentOrdersList">
                <div class="empty-state small">
                  <p>No orders yet. Start exploring our releases!</p>
                  <a href="/releases" class="btn-primary small">Browse Music</a>
                </div>
              </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
              <h3>Quick Actions</h3>
              <div class="actions-grid">
                <a href="/releases" class="action-card">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" /></svg>
                  <span>New Releases</span>
                </a>
                <button class="action-card" data-tab="downloads">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>
                  <span>My Downloads</span>
                </button>
                <button class="action-card" data-tab="profile">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                  <span>Edit Profile</span>
                </button>
                <a href="/cart" class="action-card">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
                  <span>View Cart</span>
                </a>
              </div>
            </div>
          </section>

          <!-- Orders Tab -->
          <section class="tab-content" id="tab-orders">
            <div class="content-header">
              <div class="content-header-left">
                <h1>My Orders</h1>
                <p class="content-subtitle">Track and manage your purchases</p>
              </div>
              <div class="content-header-right">
                <button class="btn-secondary" id="printOrdersBtn">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" /></svg>
                  Print History
                </button>
                <button class="btn-secondary" id="exportOrdersBtn">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                  Export CSV
                </button>
              </div>
            </div>

            <!-- Order Filters -->
            <div class="filters-bar">
              <div class="filter-tabs">
                <button class="filter-tab active" data-filter="all">All Orders</button>
                <button class="filter-tab" data-filter="pending">Pending</button>
                <button class="filter-tab" data-filter="processing">Processing</button>
                <button class="filter-tab" data-filter="shipped">Shipped</button>
                <button class="filter-tab" data-filter="delivered">Delivered</button>
              </div>
              <div class="filter-search">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
                <input type="text" id="orderSearch" placeholder="Search orders...">
              </div>
            </div>

            <!-- Orders List -->
            <div class="orders-container" id="ordersContainer">
              <div class="empty-state">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" /></svg>
                <h3>No orders yet</h3>
                <p>When you make a purchase, your orders will appear here.</p>
                <a href="/releases" class="btn-primary">Start Shopping</a>
              </div>
            </div>
          </section>

          <!-- Downloads Tab -->
          <section class="tab-content" id="tab-downloads">
            <div class="content-header">
              <div class="content-header-left">
                <h1>My Downloads</h1>
                <p class="content-subtitle">Access your purchased digital content</p>
              </div>
              <div class="content-header-right">
                <button class="btn-secondary" id="downloadAllBtn">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>
                  Download All
                </button>
              </div>
            </div>

            <div class="downloads-container" id="downloadsContainer">
              <div class="empty-state">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" /></svg>
                <h3>No downloads yet</h3>
                <p>Your purchased digital releases will appear here.</p>
                <a href="/releases" class="btn-primary">Browse Releases</a>
              </div>
            </div>
          </section>

          <!-- Wishlist Tab -->
          <section class="tab-content" id="tab-wishlist">
            <div class="content-header">
              <div class="content-header-left">
                <h1>My Wishlist</h1>
                <p class="content-subtitle">Items you've saved for later</p>
              </div>
            </div>

            <div class="wishlist-container" id="wishlistContainer">
              <div class="empty-state">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>
                <h3>Your wishlist is empty</h3>
                <p>Save items you love by clicking the heart icon on any release.</p>
                <a href="/releases" class="btn-primary">Discover Music</a>
              </div>
            </div>
          </section>

          <!-- Profile Tab -->
          <section class="tab-content" id="tab-profile">
            <div class="content-header">
              <div class="content-header-left">
                <h1>My Profile</h1>
                <p class="content-subtitle">Manage your personal information</p>
              </div>
            </div>

            <div class="profile-sections">
              <!-- Avatar & Username Section -->
              <div class="section-card">
                <div class="section-card-header">
                  <h2>Public Profile</h2>
                </div>
                <div class="profile-avatar-section">
                  <div class="profile-avatar-large" id="profileAvatarLarge">
                    <span id="profileAvatarInitial">C</span>
                  </div>
                  <div class="avatar-actions">
                    <input type="file" id="avatarUpload" accept="image/*" class="hidden">
                    <button class="btn-secondary small" id="uploadAvatarBtn">
                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                      Upload Photo
                    </button>
                    <button class="btn-text small" id="removeAvatarBtn">Remove</button>
                  </div>
                </div>
                <form id="usernameForm" class="profile-form">
                  <div class="form-group">
                    <label for="username">Username</label>
                    <div class="input-with-prefix">
                      <span class="input-prefix">@</span>
                      <input type="text" id="username" name="username" placeholder="yourname" pattern="^[a-zA-Z0-9_]{3,20}$" minlength="3" maxlength="20">
                    </div>
                    <span class="form-hint">3-20 characters. Letters, numbers, and underscores only.</span>
                    <span class="form-error hidden" id="usernameError"></span>
                  </div>
                  <div class="form-group">
                    <label for="displayName">Display Name</label>
                    <input type="text" id="displayName" name="displayName" placeholder="Your Name" maxlength="50">
                    <span class="form-hint">This is how your name will appear on comments and reviews.</span>
                  </div>
                  <div class="form-actions">
                    <button type="submit" class="btn-primary" id="saveUsernameBtn">Save Changes</button>
                  </div>
                </form>
              </div>

              <!-- Personal Information -->
              <div class="section-card">
                <div class="section-card-header">
                  <h2>Personal Information</h2>
                </div>
                <form id="personalInfoForm" class="profile-form">
                  <div class="form-row">
                    <div class="form-group">
                      <label for="firstName">First Name</label>
                      <input type="text" id="firstName" name="firstName" placeholder="John">
                    </div>
                    <div class="form-group">
                      <label for="lastName">Last Name</label>
                      <input type="text" id="lastName" name="lastName" placeholder="Doe">
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="profileEmail">Email Address</label>
                    <input type="email" id="profileEmail" name="email" readonly>
                    <span class="form-hint">Contact support to change your email address.</span>
                  </div>
                  <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" name="phone" placeholder="+44 7XXX XXXXXX">
                  </div>
                  <div class="form-group">
                    <label for="dob">Date of Birth</label>
                    <input type="date" id="dob" name="dob">
                  </div>
                  <div class="form-actions">
                    <button type="submit" class="btn-primary" id="savePersonalBtn">Save Changes</button>
                  </div>
                </form>
              </div>

              <!-- Shipping Address -->
              <div class="section-card">
                <div class="section-card-header">
                  <h2>Shipping Address</h2>
                </div>
                <form id="addressForm" class="profile-form">
                  <div class="form-group">
                    <label for="addressLine1">Address Line 1</label>
                    <input type="text" id="addressLine1" name="addressLine1" placeholder="123 Music Street">
                  </div>
                  <div class="form-group">
                    <label for="addressLine2">Address Line 2</label>
                    <input type="text" id="addressLine2" name="addressLine2" placeholder="Flat 4B">
                  </div>
                  <div class="form-row">
                    <div class="form-group">
                      <label for="city">City</label>
                      <input type="text" id="city" name="city" placeholder="London">
                    </div>
                    <div class="form-group">
                      <label for="postcode">Postcode</label>
                      <input type="text" id="postcode" name="postcode" placeholder="E1 6AN">
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="country">Country</label>
                    <select id="country" name="country">
                      <option value="GB">United Kingdom</option>
                      <option value="US">United States</option>
                      <option value="DE">Germany</option>
                      <option value="FR">France</option>
                      <option value="NL">Netherlands</option>
                      <option value="BE">Belgium</option>
                      <option value="IE">Ireland</option>
                      <option value="AU">Australia</option>
                      <option value="CA">Canada</option>
                      <option value="JP">Japan</option>
                    </select>
                  </div>
                  <div class="form-actions">
                    <button type="submit" class="btn-primary" id="saveAddressBtn">Save Address</button>
                  </div>
                </form>
              </div>

              <!-- Account Info -->
              <div class="section-card">
                <div class="section-card-header">
                  <h2>Account Information</h2>
                </div>
                <div class="account-info-grid">
                  <div class="account-info-item">
                    <span class="account-info-label">Account ID</span>
                    <span class="account-info-value" id="accountId">FW-XXXXX-XXXXX</span>
                  </div>
                  <div class="account-info-item">
                    <span class="account-info-label">Member Since</span>
                    <span class="account-info-value" id="memberSince">Loading...</span>
                  </div>
                  <div class="account-info-item">
                    <span class="account-info-label">Account Status</span>
                    <span class="account-info-value status-active">
                      <span class="status-dot"></span>
                      Active
                    </span>
                  </div>
                  <div class="account-info-item">
                    <span class="account-info-label">Email Verified</span>
                    <span class="account-info-value" id="emailVerified">Yes</span>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- Settings Tab -->
          <section class="tab-content" id="tab-settings">
            <div class="content-header">
              <div class="content-header-left">
                <h1>Settings</h1>
                <p class="content-subtitle">Manage your account preferences and security</p>
              </div>
            </div>

            <div class="settings-sections">
              <!-- Change Password -->
              <div class="section-card">
                <div class="section-card-header">
                  <h2>Change Password</h2>
                </div>
                <form id="passwordForm" class="profile-form">
                  <div class="form-group">
                    <label for="currentPassword">Current Password</label>
                    <div class="password-input-wrapper">
                      <input type="password" id="currentPassword" name="currentPassword" required>
                      <button type="button" class="toggle-password" data-target="currentPassword">
                        <svg class="eye-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>
                      </button>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="newPassword">New Password</label>
                    <div class="password-input-wrapper">
                      <input type="password" id="newPassword" name="newPassword" required minlength="8">
                      <button type="button" class="toggle-password" data-target="newPassword">
                        <svg class="eye-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>
                      </button>
                    </div>
                    <div class="password-strength" id="passwordStrength">
                      <div class="strength-bar"><div class="strength-fill"></div></div>
                      <span class="strength-text">Password strength</span>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="confirmPassword">Confirm New Password</label>
                    <div class="password-input-wrapper">
                      <input type="password" id="confirmPassword" name="confirmPassword" required>
                      <button type="button" class="toggle-password" data-target="confirmPassword">
                        <svg class="eye-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>
                      </button>
                    </div>
                    <span class="form-error hidden" id="passwordMatchError">Passwords do not match</span>
                  </div>
                  <div class="form-actions">
                    <button type="submit" class="btn-primary" id="changePasswordBtn">Update Password</button>
                  </div>
                </form>
              </div>

              <!-- Email Preferences -->
              <div class="section-card">
                <div class="section-card-header">
                  <h2>Email Preferences</h2>
                </div>
                <form id="emailPrefsForm" class="profile-form">
                  <div class="toggle-group">
                    <div class="toggle-item">
                      <div class="toggle-info">
                        <span class="toggle-label">Order Updates</span>
                        <span class="toggle-description">Receive emails about your order status</span>
                      </div>
                      <label class="toggle-switch">
                        <input type="checkbox" id="emailOrders" name="emailOrders" checked>
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                    <div class="toggle-item">
                      <div class="toggle-info">
                        <span class="toggle-label">New Releases</span>
                        <span class="toggle-description">Get notified about new music releases</span>
                      </div>
                      <label class="toggle-switch">
                        <input type="checkbox" id="emailReleases" name="emailReleases" checked>
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                    <div class="toggle-item">
                      <div class="toggle-info">
                        <span class="toggle-label">Promotions & Discounts</span>
                        <span class="toggle-description">Receive special offers and discount codes</span>
                      </div>
                      <label class="toggle-switch">
                        <input type="checkbox" id="emailPromos" name="emailPromos">
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                    <div class="toggle-item">
                      <div class="toggle-info">
                        <span class="toggle-label">Newsletter</span>
                        <span class="toggle-description">Monthly updates from Fresh Wax</span>
                      </div>
                      <label class="toggle-switch">
                        <input type="checkbox" id="emailNewsletter" name="emailNewsletter">
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                  </div>
                  <div class="form-actions">
                    <button type="submit" class="btn-primary" id="saveEmailPrefsBtn">Save Preferences</button>
                  </div>
                </form>
              </div>

              <!-- Privacy & Data -->
              <div class="section-card">
                <div class="section-card-header">
                  <h2>Privacy & Data</h2>
                </div>
                <div class="privacy-options">
                  <div class="privacy-item">
                    <div class="privacy-info">
                      <span class="privacy-label">Download My Data</span>
                      <span class="privacy-description">Get a copy of all your account data</span>
                    </div>
                    <button class="btn-secondary small" id="downloadDataBtn">Request Data</button>
                  </div>
                  <div class="privacy-item danger">
                    <div class="privacy-info">
                      <span class="privacy-label">Delete Account</span>
                      <span class="privacy-description">Permanently delete your account and all data</span>
                    </div>
                    <button class="btn-danger small" id="deleteAccountBtn">Delete Account</button>
                  </div>
                </div>
              </div>

              <!-- Login Activity -->
              <div class="section-card">
                <div class="section-card-header">
                  <h2>Login Activity</h2>
                </div>
                <div class="activity-list" id="loginActivityList">
                  <div class="activity-item current">
                    <div class="activity-icon">
                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                    </div>
                    <div class="activity-info">
                      <span class="activity-device">Current Session</span>
                      <span class="activity-details">This device • Active now</span>
                    </div>
                    <span class="activity-badge">Current</span>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </main>
  </div>

  <!-- Toast Notification -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Confirmation Modal -->
  <div class="modal-overlay hidden" id="confirmModal">
    <div class="modal">
      <div class="modal-header">
        <h3 id="modalTitle">Confirm Action</h3>
        <button class="modal-close" id="modalClose">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
        </button>
      </div>
      <div class="modal-body">
        <p id="modalMessage">Are you sure you want to proceed?</p>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="modalCancel">Cancel</button>
        <button class="btn-danger" id="modalConfirm">Confirm</button>
      </div>
    </div>
  </div>

  <!-- Order Details Modal -->
  <div class="modal-overlay hidden" id="orderModal">
    <div class="modal large">
      <div class="modal-header">
        <h3>Order Details</h3>
        <button class="modal-close" id="orderModalClose">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
        </button>
      </div>
      <div class="modal-body" id="orderModalContent">
        <!-- Order details will be loaded here -->
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="printOrderBtn">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" /></svg>
          Print
        </button>
        <button class="btn-primary" id="closeOrderModalBtn">Close</button>
      </div>
    </div>
  </div>
</body>
</html>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
    background: #f5f5f5;
    color: #1a1a1a;
    line-height: 1.6;
  }

  .hidden { display: none !important; }

  /* Loading Screen */
  .loading-screen {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    background: #ffffff;
  }

  .spinner {
    width: 48px;
    height: 48px;
    border: 4px solid #e5e5e5;
    border-top-color: #000000;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 1rem;
  }

  @keyframes spin { to { transform: rotate(360deg); } }

  /* Header */
  .header {
    background: #ffffff;
    border-bottom: 2px solid #000000;
    position: sticky;
    top: 0;
    z-index: 100;
  }

  .header-container {
    max-width: 1600px;
    margin: 0 auto;
    padding: 0.75rem 1.5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 2rem;
  }

  .header-left { display: flex; align-items: center; gap: 1rem; }
  .logo-link { display: flex; align-items: center; }
  .logo { height: 50px; }

  .header-nav {
    display: flex;
    align-items: center;
    gap: 1.5rem;
  }

  .nav-link {
    color: #1a1a1a;
    text-decoration: none;
    font-weight: 500;
    font-size: 0.95rem;
    padding: 0.5rem 0;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
  }

  .nav-link:hover { border-bottom-color: #000000; }

  .cart-link {
    position: relative;
    display: flex;
    align-items: center;
  }

  .cart-count {
    position: absolute;
    top: -8px;
    right: -8px;
    background: #dc2626;
    color: #fff;
    font-size: 0.7rem;
    font-weight: 700;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .header-right { display: flex; align-items: center; gap: 1rem; }

  .user-menu { position: relative; }

  .user-menu-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: none;
    border: 2px solid #e5e5e5;
    padding: 0.4rem 0.75rem 0.4rem 0.4rem;
    border-radius: 100px;
    cursor: pointer;
    transition: all 0.2s;
  }

  .user-menu-btn:hover { border-color: #000000; }

  .user-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: linear-gradient(135deg, #000000, #333333);
    color: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.85rem;
  }

  .user-display-name {
    font-weight: 600;
    font-size: 0.9rem;
    max-width: 120px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .user-dropdown {
    position: absolute;
    top: calc(100% + 8px);
    right: 0;
    background: #ffffff;
    border: 2px solid #000000;
    border-radius: 8px;
    min-width: 200px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.15);
    z-index: 1000;
  }

  .dropdown-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    color: #1a1a1a;
    text-decoration: none;
    font-size: 0.9rem;
    transition: background 0.2s;
    border: none;
    background: none;
    width: 100%;
    cursor: pointer;
    text-align: left;
  }

  .dropdown-item:hover { background: #f5f5f5; }
  .dropdown-item svg { width: 18px; height: 18px; color: #666666; }
  .dropdown-divider { height: 1px; background: #e5e5e5; margin: 0.5rem 0; }
  .logout-item { color: #dc2626; }
  .logout-item:hover { background: #fef2f2; }

  /* Dashboard Layout */
  .dashboard {
    min-height: calc(100vh - 70px);
  }

  .dashboard-layout {
    display: flex;
    max-width: 1600px;
    margin: 0 auto;
  }

  /* Sidebar */
  .sidebar {
    width: 260px;
    background: #ffffff;
    border-right: 2px solid #e5e5e5;
    min-height: calc(100vh - 70px);
    position: sticky;
    top: 70px;
    display: flex;
    flex-direction: column;
  }

  .sidebar-profile {
    padding: 1.5rem;
    border-bottom: 2px solid #e5e5e5;
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .sidebar-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: linear-gradient(135deg, #000000, #333333);
    color: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 1.1rem;
    flex-shrink: 0;
  }

  .sidebar-user-info {
    display: flex;
    flex-direction: column;
    min-width: 0;
  }

  .sidebar-username {
    font-weight: 600;
    font-size: 0.95rem;
    color: #1a1a1a;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .sidebar-member-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.75rem;
    color: #059669;
    font-weight: 500;
    margin-top: 0.25rem;
  }

  .sidebar-nav {
    padding: 1rem 0;
    flex: 1;
  }

  .sidebar-link {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1.5rem;
    color: #666666;
    font-size: 0.95rem;
    font-weight: 500;
    background: none;
    border: none;
    width: 100%;
    text-align: left;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
  }

  .sidebar-link:hover {
    color: #1a1a1a;
    background: #f5f5f5;
  }

  .sidebar-link.active {
    color: #1a1a1a;
    background: #f5f5f5;
    font-weight: 600;
  }

  .sidebar-link.active::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background: #000000;
  }

  .sidebar-link svg { width: 20px; height: 20px; }

  .sidebar-badge {
    margin-left: auto;
    background: #e5e5e5;
    color: #666666;
    font-size: 0.75rem;
    font-weight: 600;
    padding: 0.2rem 0.5rem;
    border-radius: 100px;
  }

  .sidebar-footer {
    padding: 1rem 1.5rem;
    border-top: 2px solid #e5e5e5;
  }

  .sidebar-cta {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    background: #000000;
    color: #ffffff;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.9rem;
    border-radius: 6px;
    transition: all 0.2s;
  }

  .sidebar-cta:hover {
    background: #333333;
    transform: translateY(-1px);
  }

  .sidebar-cta svg { width: 18px; height: 18px; }

  /* Main Content */
  .main-content {
    flex: 1;
    padding: 2rem;
    min-width: 0;
  }

  .tab-content {
    display: none;
  }

  .tab-content.active {
    display: block;
  }

  .content-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 1rem;
  }

  .content-header h1 {
    font-size: 1.75rem;
    font-weight: 700;
    color: #1a1a1a;
    margin-bottom: 0.25rem;
  }

  .content-subtitle {
    color: #666666;
    font-size: 0.95rem;
  }

  .content-header-right {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .last-login {
    font-size: 0.85rem;
    color: #666666;
  }

  /* Stats Grid */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .stat-card {
    background: #ffffff;
    border: 2px solid #e5e5e5;
    border-radius: 8px;
    padding: 1.25rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: all 0.2s;
  }

  .stat-card:hover {
    border-color: #000000;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  .stat-icon {
    width: 48px;
    height: 48px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .stat-icon svg { width: 24px; height: 24px; }
  .orders-icon { background: #dbeafe; color: #2563eb; }
  .downloads-icon { background: #dcfce7; color: #16a34a; }
  .wishlist-icon { background: #fce7f3; color: #db2777; }
  .spent-icon { background: #fef3c7; color: #d97706; }

  .stat-details { display: flex; flex-direction: column; }
  .stat-number { font-size: 1.5rem; font-weight: 700; color: #1a1a1a; line-height: 1; }
  .stat-label { font-size: 0.85rem; color: #666666; margin-top: 0.25rem; }

  /* Section Card */
  .section-card {
    background: #ffffff;
    border: 2px solid #e5e5e5;
    border-radius: 8px;
    margin-bottom: 1.5rem;
  }

  .section-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.5rem;
    border-bottom: 2px solid #e5e5e5;
  }

  .section-card-header h2 {
    font-size: 1.1rem;
    font-weight: 600;
    color: #1a1a1a;
  }

  .view-all-btn {
    background: none;
    border: none;
    color: #666666;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: color 0.2s;
  }

  .view-all-btn:hover { color: #000000; }

  /* Recent Orders List */
  .recent-orders-list {
    padding: 1rem 1.5rem;
  }

  .recent-order-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    border: 2px solid #e5e5e5;
    border-radius: 6px;
    margin-bottom: 0.75rem;
    transition: all 0.2s;
    cursor: pointer;
  }

  .recent-order-item:hover {
    border-color: #000000;
    background: #fafafa;
  }

  .recent-order-item:last-child { margin-bottom: 0; }

  .order-thumb {
    width: 56px;
    height: 56px;
    border-radius: 4px;
    object-fit: cover;
    border: 1px solid #e5e5e5;
  }

  .order-info { flex: 1; min-width: 0; }
  .order-title { font-weight: 600; color: #1a1a1a; font-size: 0.95rem; }
  .order-meta { font-size: 0.85rem; color: #666666; }

  .order-status-badge {
    padding: 0.35rem 0.75rem;
    border-radius: 100px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .order-status-badge.pending { background: #fef3c7; color: #92400e; }
  .order-status-badge.processing { background: #dbeafe; color: #1e40af; }
  .order-status-badge.shipped { background: #e0e7ff; color: #3730a3; }
  .order-status-badge.delivered { background: #dcfce7; color: #166534; }
  .order-status-badge.cancelled { background: #fee2e2; color: #991b1b; }

  /* Quick Actions */
  .quick-actions h3 {
    font-size: 1rem;
    font-weight: 600;
    color: #1a1a1a;
    margin-bottom: 1rem;
  }

  .actions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 1rem;
  }

  .action-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.75rem;
    padding: 1.25rem 1rem;
    background: #ffffff;
    border: 2px solid #e5e5e5;
    border-radius: 8px;
    text-decoration: none;
    color: #1a1a1a;
    font-weight: 500;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.2s;
  }

  .action-card:hover {
    border-color: #000000;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  .action-card svg { width: 24px; height: 24px; color: #666666; }

  /* Empty State */
  .empty-state {
    text-align: center;
    padding: 3rem 2rem;
    color: #666666;
  }

  .empty-state.small { padding: 2rem 1rem; }
  .empty-state svg { width: 64px; height: 64px; color: #d4d4d4; margin-bottom: 1rem; }
  .empty-state h3 { font-size: 1.1rem; color: #1a1a1a; margin-bottom: 0.5rem; }
  .empty-state p { font-size: 0.95rem; margin-bottom: 1.5rem; }

  /* Buttons */
  .btn-primary {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    background: #000000;
    color: #ffffff;
    border: 2px solid #000000;
    border-radius: 6px;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    text-decoration: none;
  }

  .btn-primary:hover {
    background: #ffffff;
    color: #000000;
  }

  .btn-primary.small { padding: 0.5rem 1rem; font-size: 0.85rem; }
  .btn-primary svg { width: 18px; height: 18px; }

  .btn-secondary {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    background: #ffffff;
    color: #1a1a1a;
    border: 2px solid #e5e5e5;
    border-radius: 6px;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    text-decoration: none;
  }

  .btn-secondary:hover { border-color: #000000; }
  .btn-secondary.small { padding: 0.5rem 1rem; font-size: 0.85rem; }
  .btn-secondary svg { width: 18px; height: 18px; }

  .btn-text {
    background: none;
    border: none;
    color: #666666;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    padding: 0.5rem;
    transition: color 0.2s;
  }

  .btn-text:hover { color: #1a1a1a; }
  .btn-text.small { font-size: 0.85rem; padding: 0.25rem 0.5rem; }

  .btn-danger {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    background: #dc2626;
    color: #ffffff;
    border: 2px solid #dc2626;
    border-radius: 6px;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }

  .btn-danger:hover { background: #b91c1c; border-color: #b91c1c; }
  .btn-danger.small { padding: 0.5rem 1rem; font-size: 0.85rem; }

  /* Filters Bar */
  .filters-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .filter-tabs {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .filter-tab {
    padding: 0.5rem 1rem;
    background: #ffffff;
    border: 2px solid #e5e5e5;
    border-radius: 6px;
    font-size: 0.85rem;
    font-weight: 500;
    color: #666666;
    cursor: pointer;
    transition: all 0.2s;
  }

  .filter-tab:hover { border-color: #000000; color: #1a1a1a; }
  .filter-tab.active { background: #000000; border-color: #000000; color: #ffffff; }

  .filter-search {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: #ffffff;
    border: 2px solid #e5e5e5;
    border-radius: 6px;
    min-width: 250px;
  }

  .filter-search svg { width: 18px; height: 18px; color: #999999; }

  .filter-search input {
    border: none;
    outline: none;
    font-size: 0.9rem;
    width: 100%;
  }

  /* Orders Container */
  .orders-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .order-card {
    background: #ffffff;
    border: 2px solid #e5e5e5;
    border-radius: 8px;
    overflow: hidden;
    transition: all 0.2s;
    cursor: pointer;
  }

  .order-card:hover {
    border-color: #000000;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  .order-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.5rem;
    background: #fafafa;
    border-bottom: 1px solid #e5e5e5;
  }

  .order-card-id {
    font-weight: 700;
    color: #1a1a1a;
  }

  .order-card-date {
    font-size: 0.85rem;
    color: #666666;
  }

  .order-card-body {
    padding: 1rem 1.5rem;
    display: flex;
    gap: 1.5rem;
    align-items: center;
  }

  .order-items-preview {
    display: flex;
    gap: -0.5rem;
  }

  .order-item-thumb {
    width: 64px;
    height: 64px;
    border-radius: 4px;
    object-fit: cover;
    border: 2px solid #ffffff;
    margin-left: -8px;
  }

  .order-item-thumb:first-child { margin-left: 0; }

  .order-card-details {
    flex: 1;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 1rem;
  }

  .order-detail-item {
    display: flex;
    flex-direction: column;
  }

  .order-detail-label {
    font-size: 0.75rem;
    color: #666666;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 0.25rem;
  }

  .order-detail-value {
    font-weight: 600;
    color: #1a1a1a;
  }

  /* Profile Form */
  .profile-sections,
  .settings-sections {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .profile-avatar-section {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    padding: 1.5rem;
    border-bottom: 2px solid #e5e5e5;
  }

  .profile-avatar-large {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: linear-gradient(135deg, #000000, #333333);
    color: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 2rem;
    flex-shrink: 0;
  }

  .avatar-actions {
    display: flex;
    gap: 0.75rem;
    align-items: center;
  }

  .profile-form {
    padding: 1.5rem;
  }

  .form-group {
    margin-bottom: 1.25rem;
  }

  .form-group:last-child { margin-bottom: 0; }

  .form-group label {
    display: block;
    font-size: 0.9rem;
    font-weight: 600;
    color: #1a1a1a;
    margin-bottom: 0.5rem;
  }

  .form-group input,
  .form-group select,
  .form-group textarea {
    width: 100%;
    padding: 0.75rem 1rem;
    border: 2px solid #e5e5e5;
    border-radius: 6px;
    font-size: 0.95rem;
    transition: border-color 0.2s;
  }

  .form-group input:focus,
  .form-group select:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: #000000;
  }

  .form-group input:read-only {
    background: #f5f5f5;
    color: #666666;
  }

  .form-hint {
    display: block;
    font-size: 0.8rem;
    color: #666666;
    margin-top: 0.5rem;
  }

  .form-error {
    display: block;
    font-size: 0.8rem;
    color: #dc2626;
    margin-top: 0.5rem;
  }

  .form-row {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
  }

  .form-actions {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 2px solid #e5e5e5;
    display: flex;
    justify-content: flex-end;
    gap: 0.75rem;
  }

  .input-with-prefix {
    display: flex;
    align-items: center;
    border: 2px solid #e5e5e5;
    border-radius: 6px;
    overflow: hidden;
    transition: border-color 0.2s;
  }

  .input-with-prefix:focus-within { border-color: #000000; }

  .input-prefix {
    padding: 0.75rem 0 0.75rem 1rem;
    background: #f5f5f5;
    color: #666666;
    font-weight: 600;
  }

  .input-with-prefix input {
    border: none;
    padding-left: 0.25rem;
  }

  .input-with-prefix input:focus { outline: none; }

  /* Password Input */
  .password-input-wrapper {
    position: relative;
  }

  .password-input-wrapper input {
    padding-right: 3rem;
  }

  .toggle-password {
    position: absolute;
    right: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    cursor: pointer;
    color: #666666;
    padding: 0.25rem;
    transition: color 0.2s;
  }

  .toggle-password:hover { color: #1a1a1a; }
  .toggle-password svg { width: 20px; height: 20px; }

  /* Password Strength */
  .password-strength {
    margin-top: 0.5rem;
  }

  .strength-bar {
    height: 4px;
    background: #e5e5e5;
    border-radius: 2px;
    overflow: hidden;
    margin-bottom: 0.25rem;
  }

  .strength-fill {
    height: 100%;
    width: 0%;
    background: #dc2626;
    transition: all 0.3s;
  }

  .strength-fill.weak { width: 25%; background: #dc2626; }
  .strength-fill.fair { width: 50%; background: #f59e0b; }
  .strength-fill.good { width: 75%; background: #10b981; }
  .strength-fill.strong { width: 100%; background: #059669; }

  .strength-text {
    font-size: 0.75rem;
    color: #666666;
  }

  /* Account Info Grid */
  .account-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    padding: 1.5rem;
  }

  .account-info-item {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .account-info-label {
    font-size: 0.8rem;
    color: #666666;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .account-info-value {
    font-weight: 600;
    color: #1a1a1a;
  }

  .account-info-value.status-active {
    color: #059669;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #059669;
  }

  /* Toggle Group */
  .toggle-group {
    padding: 1rem 1.5rem;
  }

  .toggle-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 0;
    border-bottom: 1px solid #e5e5e5;
  }

  .toggle-item:last-child { border-bottom: none; }

  .toggle-info { flex: 1; }
  .toggle-label { display: block; font-weight: 600; color: #1a1a1a; margin-bottom: 0.25rem; }
  .toggle-description { font-size: 0.85rem; color: #666666; }

  .toggle-switch {
    position: relative;
    width: 48px;
    height: 28px;
    cursor: pointer;
  }

  .toggle-switch input { opacity: 0; width: 0; height: 0; }

  .toggle-slider {
    position: absolute;
    inset: 0;
    background: #e5e5e5;
    border-radius: 28px;
    transition: background 0.3s;
  }

  .toggle-slider::before {
    content: '';
    position: absolute;
    width: 22px;
    height: 22px;
    left: 3px;
    bottom: 3px;
    background: #ffffff;
    border-radius: 50%;
    transition: transform 0.3s;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  }

  .toggle-switch input:checked + .toggle-slider { background: #000000; }
  .toggle-switch input:checked + .toggle-slider::before { transform: translateX(20px); }

  /* Privacy Options */
  .privacy-options {
    padding: 1rem 1.5rem;
  }

  .privacy-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 0;
    border-bottom: 1px solid #e5e5e5;
  }

  .privacy-item:last-child { border-bottom: none; }
  .privacy-item.danger { border-top: 2px solid #fecaca; margin-top: 1rem; padding-top: 1.5rem; }
  .privacy-info { flex: 1; }
  .privacy-label { display: block; font-weight: 600; color: #1a1a1a; margin-bottom: 0.25rem; }
  .privacy-description { font-size: 0.85rem; color: #666666; }

  /* Activity List */
  .activity-list {
    padding: 1rem 1.5rem;
  }

  .activity-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    border: 2px solid #e5e5e5;
    border-radius: 6px;
    margin-bottom: 0.75rem;
  }

  .activity-item:last-child { margin-bottom: 0; }
  .activity-item.current { border-color: #000000; background: #fafafa; }

  .activity-icon {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    background: #f5f5f5;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .activity-icon svg { width: 20px; height: 20px; color: #666666; }
  .activity-info { flex: 1; }
  .activity-device { display: block; font-weight: 600; color: #1a1a1a; }
  .activity-details { font-size: 0.85rem; color: #666666; }

  .activity-badge {
    padding: 0.25rem 0.75rem;
    background: #dcfce7;
    color: #166534;
    font-size: 0.75rem;
    font-weight: 600;
    border-radius: 100px;
  }

  /* Downloads Container */
  .downloads-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1rem;
  }

  .download-card {
    background: #ffffff;
    border: 2px solid #e5e5e5;
    border-radius: 8px;
    overflow: hidden;
    transition: all 0.2s;
  }

  .download-card:hover {
    border-color: #000000;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  .download-artwork {
    width: 100%;
    aspect-ratio: 1;
    object-fit: cover;
  }

  .download-info {
    padding: 1rem;
  }

  .download-title {
    font-weight: 600;
    color: #1a1a1a;
    margin-bottom: 0.25rem;
  }

  .download-artist {
    font-size: 0.9rem;
    color: #666666;
    margin-bottom: 0.75rem;
  }

  .download-actions {
    display: flex;
    gap: 0.5rem;
  }

  .download-btn {
    flex: 1;
    padding: 0.5rem;
    border: 2px solid #e5e5e5;
    background: #ffffff;
    color: #1a1a1a;
    font-size: 0.8rem;
    font-weight: 600;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.25rem;
  }

  .download-btn:hover { border-color: #000000; }
  .download-btn svg { width: 14px; height: 14px; }

  /* Wishlist Container */
  .wishlist-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 1rem;
  }

  .wishlist-card {
    background: #ffffff;
    border: 2px solid #e5e5e5;
    border-radius: 8px;
    overflow: hidden;
    transition: all 0.2s;
    position: relative;
  }

  .wishlist-card:hover {
    border-color: #000000;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  .wishlist-remove {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: #ffffff;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    transition: all 0.2s;
    z-index: 1;
  }

  .wishlist-remove:hover { background: #fef2f2; color: #dc2626; }
  .wishlist-remove svg { width: 16px; height: 16px; }

  .wishlist-artwork {
    width: 100%;
    aspect-ratio: 1;
    object-fit: cover;
  }

  .wishlist-info {
    padding: 1rem;
  }

  .wishlist-title {
    font-weight: 600;
    color: #1a1a1a;
    margin-bottom: 0.25rem;
    font-size: 0.95rem;
  }

  .wishlist-artist {
    font-size: 0.85rem;
    color: #666666;
    margin-bottom: 0.5rem;
  }

  .wishlist-price {
    font-weight: 700;
    color: #1a1a1a;
    margin-bottom: 0.75rem;
  }

  .wishlist-add-cart {
    width: 100%;
    padding: 0.5rem;
    background: #000000;
    color: #ffffff;
    border: none;
    border-radius: 4px;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s;
  }

  .wishlist-add-cart:hover { background: #333333; }

  /* Toast Notification */
  .toast-container {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .toast {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem 1.25rem;
    background: #1a1a1a;
    color: #ffffff;
    border-radius: 8px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    animation: slideIn 0.3s ease;
    min-width: 300px;
  }

  .toast.success { background: #059669; }
  .toast.error { background: #dc2626; }
  .toast.warning { background: #d97706; }

  .toast svg { width: 20px; height: 20px; flex-shrink: 0; }
  .toast-message { flex: 1; font-size: 0.9rem; }

  .toast-close {
    background: none;
    border: none;
    color: rgba(255,255,255,0.7);
    cursor: pointer;
    padding: 0.25rem;
    transition: color 0.2s;
  }

  .toast-close:hover { color: #ffffff; }

  @keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }

  /* Modal */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    padding: 1rem;
  }

  .modal {
    background: #ffffff;
    border: 2px solid #000000;
    border-radius: 8px;
    max-width: 480px;
    width: 100%;
    max-height: 90vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  .modal.large { max-width: 720px; }

  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.5rem;
    border-bottom: 2px solid #e5e5e5;
  }

  .modal-header h3 {
    font-size: 1.1rem;
    font-weight: 600;
  }

  .modal-close {
    background: none;
    border: none;
    cursor: pointer;
    color: #666666;
    padding: 0.25rem;
    transition: color 0.2s;
  }

  .modal-close:hover { color: #1a1a1a; }
  .modal-close svg { width: 20px; height: 20px; }

  .modal-body {
    padding: 1.5rem;
    overflow-y: auto;
  }

  .modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 0.75rem;
    padding: 1rem 1.5rem;
    border-top: 2px solid #e5e5e5;
    background: #fafafa;
  }

  /* Order Details Modal Styles */
  .order-details-modal h4 {
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
  }

  .order-details-modal h5 {
    font-size: 0.95rem;
    font-weight: 600;
    margin: 1.5rem 0 0.75rem;
    padding-top: 1rem;
    border-top: 1px solid #e5e5e5;
  }

  .order-details-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
  }

  .order-details-meta p {
    font-size: 0.9rem;
    color: #666666;
    margin-bottom: 0.25rem;
  }

  .order-items-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .order-item-row {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.75rem;
    background: #f5f5f5;
    border-radius: 6px;
  }

  .order-item-row img {
    width: 48px;
    height: 48px;
    border-radius: 4px;
    object-fit: cover;
  }

  .order-item-info {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .order-item-title {
    font-weight: 600;
    font-size: 0.9rem;
  }

  .order-item-artist {
    font-size: 0.8rem;
    color: #666666;
  }

  .order-item-format {
    font-size: 0.75rem;
    color: #999999;
  }

  .order-item-price {
    font-weight: 600;
  }

  .order-totals {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 2px solid #e5e5e5;
  }

  .order-total-row {
    display: flex;
    justify-content: space-between;
    padding: 0.5rem 0;
    font-size: 0.9rem;
  }

  .order-total-row.total {
    font-weight: 700;
    font-size: 1rem;
    border-top: 1px solid #e5e5e5;
    padding-top: 0.75rem;
    margin-top: 0.5rem;
  }

  .shipping-address {
    background: #f5f5f5;
    padding: 1rem;
    border-radius: 6px;
  }

  .shipping-address p {
    margin: 0;
    font-size: 0.9rem;
    line-height: 1.5;
  }

  /* Print Styles */
  @media print {
    .header, .sidebar, .content-header-right, .filter-tabs, .filter-search,
    .toast-container, .modal-overlay, .btn-primary, .btn-secondary, .btn-danger,
    .quick-actions, .form-actions { display: none !important; }

    .dashboard { padding: 0; }
    .dashboard-layout { display: block; }
    .main-content { padding: 0; }
    .tab-content { display: block !important; }
    .section-card { page-break-inside: avoid; }
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .sidebar { display: none; }
    .main-content { padding: 1.5rem; }
    .header-nav { display: none; }
  }

  @media (max-width: 768px) {
    .header-container { padding: 0.75rem 1rem; }
    .user-display-name { display: none; }
    .main-content { padding: 1rem; }
    .content-header { flex-direction: column; align-items: flex-start; }
    .content-header-right { width: 100%; justify-content: flex-start; }
    .stats-grid { grid-template-columns: repeat(2, 1fr); }
    .form-row { grid-template-columns: 1fr; }
    .filters-bar { flex-direction: column; align-items: stretch; }
    .filter-search { min-width: auto; }
    .toast-container { left: 1rem; right: 1rem; bottom: 1rem; }
    .toast { min-width: auto; }
  }

  @media (max-width: 480px) {
    .stats-grid { grid-template-columns: 1fr; }
    .actions-grid { grid-template-columns: repeat(2, 1fr); }
  }
</style>
---
// Frontmatter (empty or with any imports)
---

<!DOCTYPE html>
<html lang="en">
  <!-- Part 1: HTML structure -->
</html>

<style>
  /* Part 2: CSS styles */
</style>

<script type="module">
  // Part 3: JavaScript (the fixed version I just provided)
</script>